<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>คำนวณตอกเบี้ย</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #f4f4f9;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        table, th, td {
            border: 1px solid #ddd;
        }
        th, td {
            padding: 8px;
            text-align: right;
        }
        th {
            background-color: #4CAF50;
            color: white;
        }
        input[type="number"], input[type="button"] {
            padding: 8px;
            width: 100%;
            margin: 5px 0;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <h2>คำนวณตอกเบี้ย</h2>
    <form id="loanForm">
        <label for="principal">เงินต้น (บาท):</label>
        <input type="number" id="principal" name="principal" required>

        <label for="interestRate">ดอกเบี้ย (% ต่อปี):</label>
        <input type="number" id="interestRate" name="interestRate" required>

        <label for="months">จำนวนงวด (เดือน):</label>
        <input type="number" id="months" name="months" required>

        <input type="button" value="คำนวณ" onclick="calculateLoan()">
    </form>

    <table id="resultTable" style="display:none;">
        <thead>
            <tr>
                <th>งวด</th>
                <th>เงินต้น (บาท)</th>
                <th>ดอกเบี้ย (บาท)</th>
                <th>เงินต้น + ดอกเบี้ย (บาท)</th>
                <th>ชำระ/เดือน (บาท)</th>
                <th>เงินต้นคงเหลือ (บาท)</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <script>
        function calculateLoan() {
            var principal = parseFloat(document.getElementById('principal').value);
            var interestRate = parseFloat(document.getElementById('interestRate').value) / 100;
            var months = parseInt(document.getElementById('months').value);

            if (isNaN(principal) || isNaN(interestRate) || isNaN(months)) {
                alert("กรุณากรอกข้อมูลให้ครบถ้วน");
                return;
            }

            var monthlyInterest = interestRate / 12;
            var monthlyPayment = (principal * monthlyInterest) / (1 - Math.pow(1 + monthlyInterest, -months));

            var tableBody = document.querySelector("#resultTable tbody");
            tableBody.innerHTML = ""; // Clear previous rows

            var remainingPrincipal = principal;
            for (var i = 1; i <= months; i++) {
                var interest = remainingPrincipal * monthlyInterest;
                var totalPayment = monthlyPayment;
                var principalPayment = totalPayment - interest;
                remainingPrincipal -= principalPayment;

                var row = document.createElement('tr');

                row.innerHTML = `
                    <td>${i}</td>
                    <td>${remainingPrincipal.toFixed(2)}</td>
                    <td>${interest.toFixed(2)}</td>
                    <td>${(remainingPrincipal + interest).toFixed(2)}</td>
                    <td>${monthlyPayment.toFixed(2)}</td>
                    <td>${remainingPrincipal.toFixed(2)}</td>
                `;

                tableBody.appendChild(row);
            }

            document.getElementById('resultTable').style.display = 'table';
        }
    </script>
</body>
</html>
